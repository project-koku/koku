FROM minio/minio:RELEASE.2022-11-26T22-43-32Z

ARG USER_ID=1000

USER root

RUN groupadd -g ${USER_ID} kminio \
    && useradd -m -s /bin/bash -g ${USER_ID} -u ${USER_ID} -G root kminio \
    && mkdir /data || true \
    && chown root:root /data \
    && chmod u+rwx /data \
    && chmod g+rwx /opt

USER kminio

RUN umask u=rwx,g=rwx,o=rx
