# Bonfire deployment configuration

# Defines where to fetch the file that defines application configs
appsFile:
  host: gitlab
  repo: insights-platform/cicd-common
  path: bonfire_configs/ephemeral_apps.yaml

# (optional) define any apps locally. An app defined here with <name> will override config for app
# <name> in above fetched config.
apps:
- name: hccm
  components:
    - name: koku
      host: local
      repo: project-koku/koku
      path: deploy/clowdapp.yaml
      ref: <insert-commit>
      parameters:
        IMAGE_TAG: <insert-tag>
        KOKU_MIN_REPLICAS: 1
        LISTENER_MIN_REPLICAS: 1
        MASU_MIN_REPLICAS: 1
        SCHEDULER_MIN_REPLICAS: 1
        SOURCES_CLIENT_MIN_REPLICAS: 1
        SOURCES_LISTENER_MIN_REPLICAS: 1
        WORKER_CELERY_MIN_REPLICAS: 1
        WORKER_COST_MODEL_MIN_REPLICAS: 1
        WORKER_DOWNLOAD_MIN_REPLICAS: 1
        WORKER_OCP_MIN_REPLICAS: 1
        WORKER_PRIORITY_MIN_REPLICAS: 1
        WORKER_REFRESH_MIN_REPLICAS: 1
        WORKER_SUMMARY_MIN_REPLICAS: 1
        PRESTO_PORT: 8000
        PRESTO_HOST: presto-coordinator
        S3_BUCKET_NAME: koku-eph-s3
        AWS_ACCESS_KEY_ID_EPH: <insert-base64-encoded-value>
        AWS_SECRET_ACCESS_KEY_EPH: <insert-base64-encoded-value>
        GCP_CREDENTIALS_EPH: <insert-base64-encoded-value>

    - name: hive-metastore
      host: github
      repo: redhatinsights/ubi-hive
      path: deploy/clowdapp.yaml
      ref: main
      parameters:
        IMAGE_TAG: 2.3.3-004
        S3_BUCKET_NAME: koku-eph-s3
    - name: presto
      host: github
      repo: redhatinsights/ubi-trino
      path: deploy/clowdapp.yaml
      ref: main
      parameters:
        IMAGE_TAG: 348-003
        S3_BUCKET_NAME: koku-eph-s3
        COORDINATOR_MEMORY_LIMIT: 8Gi
        WORKER_MEMORY_LIMIT: 8Gi
